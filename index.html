<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datrevil | Smoke & Logo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', Courier, monospace;
        }

        /* Video Background Layer */
        #bg-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            z-index: 1;
            object-fit: cover;
            filter: contrast(1.1) brightness(0.7);
            /* Video Fade Transition */
            transition: opacity 1s ease-in-out;
            opacity: 0;
            /* Starts hidden (black) */
        }

        #bg-video.visible {
            opacity: 1;
        }

        /* Vignette Overlay Layer */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.8) 100%);
            z-index: 2;
            pointer-events: none;
        }

        /* Logo Container */
        .logo-container {
            position: relative;
            z-index: 3;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Wrapper for Continuous Float Animation */
        .logo-floater {
            animation: logoFloat 6s ease-in-out infinite;
            will-change: transform;
        }

        /* Logo Image - Handles Entrance/Exit Transitions */
        .logo-inner {
            max-width: 600px;
            width: 80vw;
            height: auto;
            opacity: 0;
            transform: scale(0.92);
            filter: blur(8px) drop-shadow(0 0 15px rgba(0, 0, 0, 0.5));
            transition: opacity 2s ease-in-out, transform 2.5s cubic-bezier(0.2, 0.8, 0.2, 1), filter 2s ease-in-out;
            will-change: opacity, transform, filter;
        }

        /* Active state (Visible) */
        .logo-inner.active {
            opacity: 1;
            transform: scale(1);
            filter: blur(0) drop-shadow(0 0 15px rgba(0, 0, 0, 0.5));
        }

        @keyframes logoFloat {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-12px);
            }
        }
    </style>
</head>

<body>

    <!-- Background Video -->
    <video autoplay muted loop playsinline id="bg-video">
        <source src="humo.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Overlay -->
    <div class="overlay"></div>

    <!-- Main Content -->
    <div class="logo-container">
        <div class="logo-floater">
            <img src="logo.png" alt="Logo" class="logo-inner" id="logo">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('bg-video');
            const logo = document.getElementById('logo');

            // Timing Configuration (seconds)
            const logoFadeOutStart = 2.5; // Seconds before end to start fading out logo
            const logoFadeInStart = 0.5;  // Seconds after start to fade in logo
            const videoFadeDuration = 1.0; // Duration of video fade (matches CSS transition)

            if (video && logo) {
                video.muted = true;

                // Ensure metadata allows duration access
                video.addEventListener('loadedmetadata', () => {
                    console.log("Video loaded, duration:", video.duration);
                });

                video.addEventListener('timeupdate', () => {
                    const duration = video.duration;
                    const currentTime = video.currentTime;

                    if (!duration) return;

                    const timeLeft = duration - currentTime;

                    // --- Logo Sync Logic ---
                    const logoIsNearEnd = timeLeft <= logoFadeOutStart;
                    const logoIsAfterStart = currentTime >= logoFadeInStart;

                    if (logoIsAfterStart && !logoIsNearEnd) {
                        logo.classList.add('active');
                    } else {
                        logo.classList.remove('active');
                    }

                    // --- Video Fade Loop Logic ---
                    const videoIsNearStart = currentTime < 0.2; // Buffer for start
                    const videoIsNearEnd = timeLeft <= videoFadeDuration;

                    // We want video visible in the middle
                    if (!videoIsNearEnd && !videoIsNearStart) {
                        video.classList.add('visible');
                    }
                    // Special case: Ensure it starts visible if already playing past fade point? 
                    // Actually, simple condition: if within [0, Fade] or [Duration-Fade, Duration], hide.
                    // But "hide" means remove 'visible' class.

                    if (currentTime > 0.1 && timeLeft > videoFadeDuration) {
                        video.classList.add('visible');
                    } else {
                        video.classList.remove('visible');
                    }
                });

                // Play handling
                const playPromise = video.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Autoplay prevented:", error);
                        document.addEventListener('click', () => video.play(), { once: true });
                    });
                }
            }
        });
    </script>
</body>

</html>